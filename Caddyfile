{
	debug
	order geofence before respond
}

:80

route /* {
	geofence {
		# cache_ttl is the duration to store ip addresses and if they are within proximity or not to increase performance
		# Cache for 7 days, valid time units are "ms", "s", "m", "h"
		# Not specifying a TTL sets no expiration on cached items and will live until restart
		cache_ttl 168h

		# freegeoip.app API token, this example reads from an environment variable
		freegeoip_api_token {$FREEGEOIP_API_TOKEN}

		# sensitivity (proximity)
		# 0 - 111 km
		# 1 - 11.1 km
		# 2 - 1.11 km
		# 3 111 meters
		# 4 11.1 meters
		# 5 1.11 meters
		sensitivity 3

		# allow_private_ip_addresses is a boolean for whether or not to allow private ip ranges
		# such as 192.X, 172.X, 10.X, [::1] (localhost)
		# false by default
		# Some cellular networks doing NATing with 172.X addresses, in which case, you may not want to allow
		allow_private_ip_addresses true

		# allowlist is a list of IP addresses that will not be checked for proximity and will be allowed to access the server
		allowlist 206.189.205.251 206.189.205.252

		# status_code is the HTTP response code that is returned if IP address is not within proximity. Default is 403
		status_code 403
	}
}

log {
	output stdout
}
